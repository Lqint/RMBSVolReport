/* === 公益小游戏样式 === */

/* === 升级版：点亮微光游戏样式 === */

/* 1. 布局与霓虹进度条 */
.game-container {
    width: 85%; height: 65%; margin-top: 80px;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
}

.neon-progress-bar {
    width: 100%; height: 16px;
    background: rgba(255,255,255,0.1);
    border-radius: 20px; border: 1px solid rgba(255,255,255,0.2);
    position: relative; margin-bottom: 40px;
    box-shadow: 0 0 10px rgba(0,0,0,0.5) inset;
}
.neon-fill {
    width: 0%; height: 100%; border-radius: 20px;
    background: linear-gradient(90deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
    box-shadow: 0 0 10px #ff9a9e;
    transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.neon-text {
    position: absolute; width: 100%; top: -25px; text-align: right;
    color: rgba(255,255,255,0.8); font-size: 0.8rem; letter-spacing: 1px;
}

/* 2. 图标网格系统 */
.map-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
    width: 100%; max-width: 320px;
}
.map-cell {
    display: flex; flex-direction: column; align-items: center; cursor: pointer;
}
.cell-label {
    margin-top: 10px; color: rgba(255,255,255,0.5); font-size: 0.85rem;
    transition: color 0.3s; font-family: 'KaiTi';
}

/* 核心：图标状态控制 */
.icon-wrapper {
    width: 70px; height: 70px; border-radius: 20px;
    background: rgba(255,255,255,0.05); /* 初始灰暗底色 */
    border: 1px solid rgba(255,255,255,0.1);
    display: flex; align-items: center; justify-content: center;
    position: relative; transition: all 0.4s ease;
}
.icon-wrapper svg {
    width: 32px; height: 32px;
    fill: #666; /* 初始灰色图标 */
    transition: all 0.4s ease;
    filter: drop-shadow(0 0 0 transparent);
}
/* 初始呼吸效果 */
.icon-wrapper:not(.active) {
    animation: dim-breathe 3s infinite;
}

/* 激活状态 (点亮后) */
.icon-wrapper.active {
    background: #fff; transform: translateY(-5px);
    border-color: #fff;
}

/* 主题色定义 */
.theme-red.active svg { fill: #FF4757; filter: drop-shadow(0 0 5px #FF4757); }
.theme-red.active .glow-ring { box-shadow: 0 0 20px #FF4757; }

.theme-orange.active svg { fill: #FFA502; filter: drop-shadow(0 0 5px #FFA502); }
.theme-orange.active .glow-ring { box-shadow: 0 0 20px #FFA502; }

.theme-green.active svg { fill: #2ED573; filter: drop-shadow(0 0 5px #2ED573); }
.theme-green.active .glow-ring { box-shadow: 0 0 20px #2ED573; }

.theme-blue.active svg { fill: #1E90FF; filter: drop-shadow(0 0 5px #1E90FF); }
.theme-blue.active .glow-ring { box-shadow: 0 0 20px #1E90FF; }

/* 激活后的文字 */
.map-cell:hover .cell-label, .icon-wrapper.active + .cell-label {
    color: #fff; text-shadow: 0 0 5px rgba(255,255,255,0.5);
}

/* 光晕层 */
.glow-ring {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    border-radius: 20px; opacity: 0; transition: opacity 0.4s;
}
.icon-wrapper.active .glow-ring { opacity: 0.6; }


/* 3. 升级版弹窗：荣誉收藏卡 */
.game-modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.85); backdrop-filter: blur(5px);
    z-index: 100; display: none; align-items: center; justify-content: center;
}
.collect-card {
    width: 85%; max-width: 340px; background: #fff;
    border-radius: 16px; overflow: hidden;
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    animation: card-pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
}
.card-hero {
    height: 200px; position: relative; overflow: hidden;
}
.card-hero img { width: 100%; height: 100%; object-fit: cover; }
.card-tag {
    position: absolute; bottom: 10px; left: 10px;
    background: rgba(0,0,0,0.7); color: #fff;
    padding: 4px 12px; border-radius: 20px; font-size: 0.8rem;
    backdrop-filter: blur(4px);
}
.card-body { padding: 25px 20px 20px 20px; text-align: center; }
.card-body h3 { font-size: 1.4rem; color: #333; margin: 0; }
.card-divider {
    width: 30px; height: 3px; background: var(--ruc-red); margin: 15px auto;
}
.card-body p {
    color: #666; font-size: 0.95rem; line-height: 1.6; margin-bottom: 20px;
    text-align: justify;
}
.card-data-row {
    background: #f8f8f8; border-radius: 8px; padding: 10px;
}
.card-stat .val { font-size: 1.5rem; font-weight: bold; color: var(--ruc-red); }
.card-stat .lbl { font-size: 0.8rem; color: #999; }

.card-btn {
    width: 100%; padding: 15px; border: none;
    background: var(--ruc-red); color: white;
    font-size: 1rem; font-weight: bold; letter-spacing: 1px;
    cursor: pointer; transition: background 0.2s;
}
.card-btn:active { background: #8a171f; }


#game-success-msg {
    margin-top: 30px; color: #fff; font-size: 1.1rem; letter-spacing: 1px;
    text-shadow: 0 0 10px #ff9a9e; opacity: 0; transition: opacity 0.5s;
}
#game-success-msg.show { opacity: 1; animation: pulse 2s infinite; }

/* === 全局环境光渐变系统 === */

/* 1. 基础容器与过渡 */
#game-slide {
    width: 100%; height: 100%;
    /* 初始状态：Level 0 (深夜) */
    background: radial-gradient(circle at center, #2b2b2b 0%, #1a1a1a 100%);
    /* 关键：让背景和文字颜色的变化有呼吸感 */
    transition: background 1.5s ease-in-out;
}

/* 标题文字的基础样式 */
.game-text-title {
    color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.5);
    letter-spacing: 2px; margin-bottom: 5px;
    transition: color 1.5s;
}
.game-text-sub {
    font-size: 0.8rem; color: rgba(255,255,255,0.6);
    transition: color 1.5s;
}

/* === 5个阶段的背景变化 === */

/* Level 1: 星光初现 (稍微带点深蓝) */
#game-slide.bg-level-1 {
    background: radial-gradient(circle at center, #3a405a 0%, #1a1a1a 100%);
}

/* Level 2: 黎明微红 (带点暖意) */
#game-slide.bg-level-2 {
    background: radial-gradient(circle at center, #593c3c 0%, #2b2020 100%);
}

/* Level 3: 旭日东升 (明显的暖橙色光晕) */
#game-slide.bg-level-3 {
    background: radial-gradient(circle at center, #8a4b38 0%, #3d1e1e 100%);
}

/* Level 4: 光芒万丈 (完全变亮，回归纸张色或暖白) */
#game-slide.bg-level-4 {
    background: radial-gradient(circle at center, #FDFBF7 0%, #eaddcf 100%);
}

/* === Level 4 下的适配 (黑夜变白昼，文字要变黑) === */

/* 1. 标题变色 */
#game-slide.bg-level-4 .game-text-title {
    color: #A61C26; /* 变成红色 */
    text-shadow: none;
}
#game-slide.bg-level-4 .game-text-sub {
    color: #666; /* 变成深灰 */
}

/* 2. 进度条适配 */
#game-slide.bg-level-4 .neon-progress-bar {
    background: rgba(0,0,0,0.05);
    border: 1px solid rgba(0,0,0,0.1);
    box-shadow: none;
}
#game-slide.bg-level-4 .neon-text {
    color: #555;
}

/* 3. 图标底座适配 */
#game-slide.bg-level-4 .icon-wrapper {
    background: rgba(0,0,0,0.05); /* 浅色背景下的底座 */
    border-color: rgba(0,0,0,0.1);
}
#game-slide.bg-level-4 .cell-label {
    color: #888; text-shadow: none;
}
/* 激活状态的标签 */
#game-slide.bg-level-4 .map-cell:hover .cell-label,
#game-slide.bg-level-4 .icon-wrapper.active + .cell-label {
    color: #A61C26; text-shadow: none; font-weight: bold;
}

/* 4. 成功文字适配 */
#game-slide.bg-level-4 #game-success-msg {
    color: #A61C26; text-shadow: none;
}

/* === 弹窗轮播图样式 === */

/* 容器占满图片区 */
.swiper-game {
    width: 100%; height: 100%;
}

/* Slide 样式 */
.swiper-game .swiper-slide {
    width: 100%; height: 100%;
}
.swiper-game .swiper-slide img {
    width: 100%; height: 100%;
    object-fit: cover;
    display: block;
}

/* 自定义分页器 (小圆点) 颜色 */
.swiper-game .swiper-pagination-bullet {
    background: rgba(255, 255, 255, 0.8);
    opacity: 0.5;
}
.swiper-game .swiper-pagination-bullet-active {
    background: #fff;
    opacity: 1;
}

/* 2. 新增：固定信息栏样式 */
.heatmap-info-box {
    /* 布局位置：在热力图下方，页脚文字上方 */
    margin: 15px auto 10px auto;
    width: 90%;
    min-height: 60px; /* 给定最小高度，防止内容变化导致页面跳动 */

    /* 视觉风格：类似便签的卡片 */
    background: rgba(255, 255, 255, 0.5);
    border: 1px dashed rgba(166, 28, 38, 0.3);
    border-radius: 8px;
    padding: 10px;

    /* 内容居中 */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;

    /* 过渡动画 */
    transition: all 0.3s ease;
}

/* 日期文字样式 */
.hm-info-date {
    font-size: 1rem;
    font-weight: bold;
    color: var(--ruc-red);
    margin-bottom: 4px;
}

/* 内容文字样式 */
.hm-info-content {
    font-size: 0.9rem;
    color: #333;
    line-height: 1.4;
}

/* 缺省提示文字样式 */
.hm-info-hint {
    color: #999;
    font-size: 0.85rem;
    font-style: italic;
}
