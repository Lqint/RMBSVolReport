/* === 新增页面 3: 见字如面 (Envelope) - 移动端适配版 === */

.envelope-wrapper {
    /* 1. 宽度响应式：占屏幕宽度的 82%，但最大不超过 340px */
    width: 82vw;
    max-width: 340px;
    height: 190px; /* 稍微加高一点 */
    position: relative;
    /* 2. 居中定位：加大顶部 margin (80px) 为信纸弹出留出空间 */
    margin: 80px auto 0;
    cursor: pointer;
    /* 消除移动端点击高亮背景 */
    -webkit-tap-highlight-color: transparent;
    /* 增加透视感 */
    perspective: 1000px;
}

.envelope-body {
    position: absolute; width: 100%; height: 100%;
    background: #e0d0b0;
    border-radius: 6px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    z-index: 2;
    transform-origin: bottom;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.6s;
}

.envelope-flap {
    position: absolute; top: 0; left: 0; width: 100%;
    height: 100px; /* 保持比例 */
    background: #d4c4a4;
    clip-path: polygon(0 0, 50% 100%, 100% 0);
    transform-origin: top;
    transition: transform 0.6s 0.1s, z-index 0s 0.3s; /* 优化 z-index 切换时机 */
    z-index: 4;
}

.envelope-letter {
    position: absolute;
    /* 3. 信纸居中：左右各留 5% */
    top: 10px; left: 5%; width: 90%;
    /* 高度适中，避免太长超出屏幕 */
    height: 260px;
    background: #fffdf9; /* 柔和米白 */
    /* 4. 布局保护：防止 padding 撑大盒子 */
    padding: 20px 20px;
    box-sizing: border-box;
    font-family: 'KaiTi', "STKaiti", serif;
    font-size: 1rem; /* 字体稍微加大 */
    line-height: 1.6; color: #333;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.05);

    transform: translateY(0);
    transition: transform 0.8s 0.4s;
    z-index: 1;
    display: flex; flex-direction: column;
    border-radius: 4px;
}

.wax-seal {
    position: absolute; top: 85px; left: 50%;
    transform: translateX(-50%);
    width: 44px; height: 44px; border-radius: 50%;
    /* 兼容性处理：如果没有 var 变量则回退红色 */
    background: var(--ruc-red, #a61c26);
    border: 2px dashed rgba(255,255,255,0.4);
    box-shadow: 0 3px 6px rgba(0,0,0,0.2);
    z-index: 5;
    transition: opacity 0.4s;
    /* 增加一点火漆质感 */
    display: flex; align-items: center; justify-content: center;
}
.wax-seal::after {
    content: '';
    width: 30px; height: 30px;
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 50%;
}

/* === 开信动画状态优化 === */

/* 封口翻开 */
.envelope-open .envelope-flap {
    transform: rotateX(180deg);
    z-index: 1; /* 翻开后层级降低 */
}

/* 火漆消失 */
.envelope-open .wax-seal {
    opacity: 0;
    transition-delay: 0s;
}

/* 5. 关键调整：信纸上移距离减少 (-110px)，防止顶部溢出 */
/* 同时 z-index 提升，确保可交互 */
.envelope-open .envelope-letter {
    transform: translateY(-110px);
    z-index: 10;
    box-shadow: 0 15px 30px rgba(0,0,0,0.15);
}

/* 6. 关键调整：信封本体明显下沉并变淡，让出视觉焦点 */
.envelope-open .envelope-body {
    transform: translateY(180px) scale(0.9);
    opacity: 0.2;
}

/* 新增：专门用于信纸文字滚动区域的样式 */
.letter-scroll-area {
    flex: 1;
    overflow-y: auto;
    padding-right: 5px; /* 给滚动条留点位置 */

    /* 核心修复：允许垂直滚动，禁止水平手势触发浏览器后退等 */
    touch-action: pan-y;

    /* iOS 惯性滚动支持，手感更像原生 App */
    -webkit-overflow-scrolling: touch;

    /* 防止点击穿透或误触 */
    cursor: auto;
}

/* 美化一下滚动条（可选） */
.letter-scroll-area::-webkit-scrollbar {
    width: 4px;
}
.letter-scroll-area::-webkit-scrollbar-thumb {
    background: #e0d0b0;
    border-radius: 2px;
}
